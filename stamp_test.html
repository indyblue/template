<!DOCTYPE html>

<html>

 <head>
	<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
  <title>Attributes example</title>
  <script type="text/javascript" src='stamp.js'></script>
  <script type="text/javascript" src='stamp2.js'></script>
 </head>

<body>
	<template id='one'>
		<h3>List {{ name }} {{b.selse}}</h3>
		<div>(b.c[2].e): {{b.c[2].e}}</div>
		<ul data-repeat-i-thing='lst'>
			<li data-idx='li-idx-{{ i.idx }}'><i>{{ i.idx }}</i> <b>{{ i.name }}</b> - {{ i.descr }}</li>
		</ul>
	</template>
	<template id='two'>
	</template>

	<div id='target'></div>
 <script>
 	function rstring(len) {
		let a = "a".charCodeAt(0);
		let rv = '';
		for(let i=0;i<len;i++){
			rv+= String.fromCharCode(a + Math.random()*26);
		}
		return rv;
	}
	let data = {name:'big list',
		b:{selse:'and then something else',
			c:[10,20,{d:1,e:4}]
		}
	}
	let lst = data.lst = [];
	for(let i=0;i<1000;i++){
		lst.push({name:rstring(30), descr:rstring(80), idx:i+1});
	}
	/*
	console.time('ctx');
	var ctx = new Stamp.Context();
	Stamp.expandInto(document.getElementById('target'), ctx.import('one'), data);
	console.timeEnd('ctx');
	// */
	//*
	console.time('stamp2');
	let b = document.getElementById('one');
	let out = document.getElementById('target');

	let t = new Template(b);
	//console.log(JSON.stringify(t,null,3));

	t.append(out, t.exec(data));
	console.timeEnd('stamp2');
	//*/
 </script>
</body>
</html>
