<!DOCTYPE html>

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
	<title>Attributes example</title>
	<script type="text/javascript" src='striker.js'></script>
</head>

<body>
	<template id='show-more'>
		<a href='#' style='display:block;'>Show more... (Showing: {{cur}} of {{ttl}})</a>
	</template>
	<template id='one'>
		<div>need a <i>test</i> <b>to see</b> if pure <u>white</u> <u>space</u> removal is bad.</div>
		<h3 class='a b c d' data-style='' data-f='' data-q='r'>List {{ name }} {{ b.selse }}</h3>
		<i data-template='#three'></i>
	</template>
	<template id='one2'>
		<ul class='a b c d' data-style='' data-page-10='#show-more' data-f='' data-q='r' data-repeat-i-thing='lst'>
			<li class='a b c d' data-style='' data-f='' data-q='r' data-idx='li-idx-{{ i.idx }}'>
				<i class='a b c d' data-style='' data-f='' data-q='r'>{{ i.idx }}/{{^.lst.length}}</i>
				<b class='a b c d' data-style='' data-f='' data-q='r'>{{ i.name }}</b> - {{ i.descr }}</li>
		</ul>
	</template>
	<template id='one3'>
		<div class='a b c d' data-style='' data-f='' data-q='r'>nested lists</div>
		<ul class='a b c d' data-style='' data-f='' data-q='r' data-page-5='' data-repeat-i-a='q'>
			<i data-template='#two'></i>
		</ul>
	</template>
	<template id='two'>
		<li class='a b c d' data-style='' data-f='' data-q='r'>Number {{ i.a }}
			<ul class='a b c d' data-style='' data-f='' data-q='r' data-repeat-j-a='i.r'>
				<li class='a b c d' data-style='' data-f='' data-q='r'>
					{{ ^.^.q.length }}|{{ ^.i.r.length }}|{{ ^.i.a }}|
					<input on-change='{{^.^.jones}}' name='funk' value='{{ j.name }}' data-key='{{j.key}}' />
				</li>
			</ul>
		</li>
	</template>
	<template id='three'>
		<div class='a b c d' data-style='' data-f='' data-q='r'>(b.c[2].e): {{ b.c.2.e }}</div>
	</template>
	<input id='bigtime' value='asdf' onkeyup='jones.bind(this)(event)' />
	<div id='target'></div>
	<script>
		'use strict';
		var btinp = document.querySelector('#bigtime');
		//console.dir(btinp);
		//btinp.onkeyup = jones;
		function jones(d, e) {
			d.j.name = this.value;
			console.log(d.j);
		}
		function rstring(len) {
			var a = "a".charCodeAt(0);
			var rv = '';
			for (var i = 0; i < len; i++) {
				rv += String.fromCharCode(a + Math.random() * 26);
			}
			return rv;
		}
		var data = {
			name: 'big list', jones: jones,
			b: {
				selse: 'and then something else',
				c: [10, 20, { d: 1, e: 4 }]
			}
		}
		var lst = data.lst = [];
		var imax = 80, jmax = 10;
		for (var i = 0; i < imax; i++) {
			lst.push({ name: rstring(30), descr: rstring(80), idx: i + 1 });
		}
		data.q = [];
		for (var i = 0; i < imax; i++) {
			data.q[i] = { a: i, r: [] };
			for (var j = 0; j < jmax; j++) {
				data.q[i].r[j] = { name: rstring(10), key: j };
			}
		}

		var striker = new Striker();
		striker.expend(document.body, '#one', data, true);
		striker.expend(document.body, '#one2', data, true);
		striker.expend(document.body, '#one3', data, true);

	</script>

</body>

</html>