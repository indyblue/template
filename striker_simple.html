<!DOCTYPE html>

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
	<title>Attributes example</title>
	<script type="text/javascript" src='ttools.js'></script>
	<script type="text/javascript" src='templar-s.js'></script>
	<style>
		.red {
			background-color: red;
		}
	</style>
</head>

<body>
	<template id='persons'>
		<!-- test comment -->
		<div>{{ model.last }}, {{model.first}}</div>
		<div data-repeat-n='model.q.nums' data-template='#formula'> </div>
		<div data-repeat-d='model.ph'>
			<div>number: +1-{{d.p}}-{{d.n}} ({{model.last}}) <input value-bind value='{{d.n}}' /></div>
		</div>
		<!-- test comment2 -->
	</template>

	<template id='formula'>
		<div on-click='{{color}}' data-model-n>{{n}} {{model.first}} ({{model.q.nums.3}} to the {{n}}th power)</div>
	</template>

	<script>
		'use strict';
		var data = {
			last: 'jones', first: 'sam',
			q: { nums: [1, 2, 3, 4, 5, 6] },
			ph: [
				{ id: 1, p: '317', n: '123-4567' },
				{ id: 2, p: '317', n: '123-4568' },
				{ id: 3, p: '317', n: '123-4569' },
				{ id: 4, p: '317', n: '123-4560' },
				{ id: 5, p: '317', n: '123-4561' },
				{ id: 6, p: '317', n: '123-4562' },
				{ id: 7, p: '317', n: '123-4563' },
			]
		};
		var ctx;
		/*
		debug:
			1: node
			2: text
			4: attr
			8: eval
			16: repeat
		*/
		ctx = {
			debug: 8 + 16,
			color: function (ctx, path) {
				console.log('color-toggle', path, ctx);
				this.classList.toggle('red');
			}
		};
		var tmp = new Templar(document.body, '#persons', data, ctx);
		tmp.exec();
		/* test recalc:
			data.last = 'smith'; data.first = 'ron'; tmp.recalc();
		*/
	</script>

</body>

</html>